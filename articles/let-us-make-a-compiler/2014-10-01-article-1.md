---
visible : false
source : http://zhuanlan.zhihu.com/mosky/19878094
title : 从零开始写个编译器吧 - 从何处下手
---

作为本系列的第一章，将考虑从何开始下手。既然写的是编译器，那在此得明确编译器长什么样子，进一步，编译器由哪几部分构成，其工作原理大概是怎样的。了解了这些，才好下手。

简单来说，编译器本身是一个程序，这个程序能将一种代码（源代码）翻译成另一种代码（目标代码）。简而言之就是如下图。

而本系列中设计出来以供编译的语言——tao 语言，也就扮演着“源代码”的角色。

而编译器，会将 tao 语言编译成目标代码以供执行。那么，是何种目标代码呢？实际上我并没有打算写一个直接生成可执行程序的编译器，换句话说，该编译器生成的目标代码不可以直接（在操作系统上）运行。因此，我需要为 tao 语言创造一个运行环境。

相对于之第一张图，第二张图多了tao runtime environment 这个东东。这即是 tao 语言的运行环境。目标代码将在此运行环境上解释执行。

但是，tao 语言作为一门语言，还必须要配一个标准库。为此，在图中加上标准库，便有了如下图。


至此，我们的任务也就清晰的呈现在眼前了。如果我们想让世界上出现一门叫做 tao 语言的新语言，并且能让程序员用这种语言写的程序能顺利运行，我们至少要做出下面三个东西：

编译器：能将 tao 语言写的源代码编译成可供运行环境解释执行的目标代码。
运行环境：解释执行编译器产生的目标代码。
标准库：供 tao 语言的用户调用的类库。